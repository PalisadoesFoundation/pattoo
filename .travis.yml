# Run on an ubuntu VM
dist: bionic
os: linux
virt: vm

# Define the application testing language and versions
language: python
python:
  - 3.6

# Run tests only against the master branch.
# branches:
#   only:
#     - master

# Setup services
services:
  - mysql
  - docker

# Setup global environmental variables
env:
  - PYTHONPATH=./ PATTOO_CONFIGDIR=$HOME/.pattoo-unittests/config PATTOO_TRAVIS="" travis_ci=true

# Install PIP packages and create a temporary config file before installing
before_install:
  - pip3 install -r pip_requirements.txt
  - mysql -e 'CREATE DATABASE pattoo_unittest;'
  - tests/bin/unittest_setup.py

install:
  - setup/install.py install database --verbose

# Run the unittest scripts
script:
  - tests/bin/do_all_tests.py --verbose
